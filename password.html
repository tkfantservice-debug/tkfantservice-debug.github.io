<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Verification - Service Maintenance</title>
    <link rel="stylesheet" href="style.css">
    <style>
            /* Make company name bold */
        .company-name {
            font-weight: bold !important;
        }
    </style>
</head>
<body class="password-page">
    <!-- Header Navigation -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                 <div class="logo-box">
                  <img src="your-logo.png" alt="Company Logo" class="logo-img">
                    </div>
                </div>
                <nav class="nav-desktop">
                    <a href="index.html#hero" class="nav-link">Home</a>
                    <a href="index.html#service" class="nav-link">Service Report</a>
                    <a href="index.html#contact" class="nav-link">Contact Us</a>
                </nav>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <nav class="nav-mobile" id="mobileMenu">
                <a href="index.html#hero" class="nav-link">Home</a>
                <a href="index.html#service" class="nav-link">Service Report</a>
                <a href="index.html#contact" class="nav-link">Contact Us</a>
            </nav>
        </div>
    </header>

    <!-- Password Section -->
    <section class="hero password-page">
        <div class="container">
            <div class="password-container">
                <h1 class="title">Password Required</h1>
                <p class="company-name" id="companyDisplay">Loading...</p>
                
                <form id="passwordForm" class="password-form">
                    <label for="passwordInput" style="color: white; font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">
                        Enter Password
                    </label>
                    
                    <div class="password-input-wrapper">
                        <input 
                            type="password" 
                            id="passwordInput" 
                            placeholder="Password..." 
                            autocomplete="off"
                            required
                        >
                        <button type="button" class="toggle-password" id="togglePassword">
                            ðŸ™ˆ
                        </button>
                    </div>
                    
                    <div id="errorMessage" class="error-message" style="display: none;"></div>
                    
                    <div id="helpSection" class="help-section" style="display: none;">
                        <p style="font-weight: 600; margin-bottom: 0.5rem;">Need help?</p>
                        <p style="margin-bottom: 0.5rem;">If you've forgotten your password or need assistance, please contact us:</p>
                        <button type="button" class="whatsapp-button" id="whatsappBtn">
                            ðŸ’¬ Contact Support
                        </button>
                    </div>
                    
                    <button type="submit" class="submit-button" id="submitBtn">
                        SUBMIT
                    </button>
                    
                    <button type="button" class="request-password-button" id="requestPasswordBtn">
                        ðŸ”‘ Request Password
                    </button>
                    
                    <button type="button" class="back-button" id="backButton">
                        BACK
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Load Company Data -->
    <script src="companyData.js"></script>
    
    <!-- Page Script -->
    <script>
        const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/1yH_2bKzrs_bvN3RWuB_T6vcAAIpBgx6eurnNowMvK10/edit';

        // ==================== LOAD COMPANY NAME ====================
        const companyDisplay = document.getElementById('companyDisplay');
        const companyName = localStorage.getItem('companyName');

        if (companyName) {
            companyDisplay.textContent = companyName;
        } else {
            window.location.href = 'index.html';
        }

        // ==================== MOBILE MENU ====================
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('active');
            });

            const mobileLinks = mobileMenu.querySelectorAll('.nav-link');
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                });
            });
        }

        // ==================== TOGGLE PASSWORD VISIBILITY ====================
        const passwordInput = document.getElementById('passwordInput');
        const togglePassword = document.getElementById('togglePassword');

        if (togglePassword && passwordInput) {
            togglePassword.addEventListener('click', () => {
                const type = passwordInput.type === 'password' ? 'text' : 'password';
                passwordInput.type = type;
                togglePassword.textContent = type === 'password' ? 'ðŸ™ˆ' : 'ðŸ™‰';
            });
        }

        // ==================== ERROR MESSAGE DISPLAY ====================
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            const passwordForm = document.getElementById('passwordForm');
            
            if (errorMessage) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }
            
            if (passwordForm) {
                passwordForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    passwordForm.style.animation = '';
                }, 500);
            }
            
            setTimeout(() => {
                if (errorMessage) {
                    errorMessage.style.display = 'none';
                }
            }, 5000);
        }

        // ==================== PASSWORD VALIDATION ====================
        const passwordForm = document.getElementById('passwordForm');
        const helpSection = document.getElementById('helpSection');
        const submitBtn = document.getElementById('submitBtn');

        let attemptCount = 0;

        if (passwordForm) {
            passwordForm.addEventListener('submit', (e) => {
                e.preventDefault();

                if (!passwordInput || !companyName) return;

                const enteredPassword = passwordInput.value.trim();

                if (enteredPassword === '') {
                    showError('Please enter a password.');
                    return;
                }

                submitBtn.disabled = true;
                submitBtn.textContent = 'VERIFYING...';

                setTimeout(() => {
                    const isCorrect = verifyPassword(companyName, enteredPassword);

                    if (isCorrect) {
                        localStorage.setItem('passwordVerified', 'true');
                        localStorage.setItem('authenticated', 'true');
                        localStorage.setItem('authCompany', companyName);
                        window.location.href = 'date-selection.html';
                    } else {
                        attemptCount++;
                        showError('âŒ Incorrect password. Please try again.');
                        passwordInput.value = '';

                        if (attemptCount >= 1 && helpSection) {
                            helpSection.style.display = 'block';
                        }

                        submitBtn.disabled = false;
                        submitBtn.textContent = 'SUBMIT';
                    }
                }, 500);
            });
        }

        // ==================== REQUEST PASSWORD ====================
        const requestPasswordBtn = document.getElementById('requestPasswordBtn');
        if (requestPasswordBtn) {
            requestPasswordBtn.addEventListener('click', () => {
                window.open(GOOGLE_FORM_URL, '_blank');
            });
        }

        // ==================== WHATSAPP SUPPORT ====================
        const whatsappBtn = document.getElementById('whatsappBtn');
        if (whatsappBtn) {
            whatsappBtn.addEventListener('click', () => {
                const phone = '601118769339';
                const message = `Hello, I need help accessing the service reports for ${companyName}. I'm having trouble with the password.`;
                window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
            });
        }

        // ==================== BACK BUTTON ====================
        const backButton = document.getElementById('backButton');
        if (backButton) {
            backButton.addEventListener('click', () => {
                window.location.href = 'index.html';
            });
        }
    </script>
</body>
</html>








